<f:layout name="Default" />

<f:section name="Title">Sprint View</f:section>
<f:section name="Javascripts">
	<script type="text/javascript" src="<f:uri.resource package='WMDB.Forger' path='js/amcharts/amcharts.js' />"></script>
	<script type="text/javascript" src="<f:uri.resource package='WMDB.Forger' path='js/amcharts/serial.js' />"></script>
	<f:if condition="{ticketCount}">
			<f:format.raw>{ticketCount}</f:format.raw>
	</f:if>
</f:section>

<f:section name="Content">
	<dl class="sub-nav">
		<dt>Available Boards</dt>
		<f:for each="{boardMenu}" as="boardNav">
			<f:if condition="{boardNav.active}">
				<f:then>
					<dd class="active">
						<f:link.action controller="Sprint" action="Index" arguments="{boardId:boardNav.id}">{boardNav.name}</f:link.action>
					</dd>
				</f:then>
				<f:else>
					<dd>
						<f:link.action controller="Sprint" action="Index" arguments="{boardId:boardNav.id}">{boardNav.name}</f:link.action>
					</dd>
				</f:else>
			</f:if>
		</f:for>
	</dl>
	<h3>Sprint Tasks</h3>
	<f:if condition="{board}">
		<div id="stackedBoardChart" style="height: 80px; width: 100%"></div>
		<table>
			<tr>
				<f:for each="{board}" as="cards" key="metacolname">
					<th>{metacolname} (<f:count subject="{cards}" />)</th>
				</f:for>
			</tr>
			<tr>
				<f:for each="{board}" as="cards">
					<td valign="top">
						<f:for each="{cards}" as="card">
							<f:render partial="BoardCard" arguments="{card: card}" />
						</f:for>
					</td>
				</f:for>
			</tr>
		</table>
		<p>Don't try to drag & drop cards, it's not working and won't be for a <b>looooong</b> time</p>
	</f:if>
</f:section>
